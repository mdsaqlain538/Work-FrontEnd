{"ast":null,"code":"import _slicedToArray from\"/Users/mdsalmanpatel/Desktop/saqlain/Mini_project/projfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Base from\"../core/Base\";import{Link}from\"react-router-dom\";import{isAuthenticated}from\"../auth/helper\";import{getProducts,deleteProduct}from\"./helper/adminapicall\";var ManageProducts=function ManageProducts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var preload=function preload(){getProducts().then(function(data){if(data.error){console.log(data.error);}else{setProducts(data);}});};useEffect(function(){preload();},[]);var deleteThisProduct=function deleteThisProduct(productId){deleteProduct(productId,user._id,token).then(function(data){if(data.error){console.log(data.error);}else{preload();}});};return/*#__PURE__*/React.createElement(Base,{title:\"Welcome admin\",description:\"Manage products here\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-4\"},\"All products:\"),/*#__PURE__*/React.createElement(Link,{className:\"btn btn-info\",to:\"/admin/dashboard\"},/*#__PURE__*/React.createElement(\"span\",{className:\"\"},\"Admin Home\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},products.map(function(product,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"row text-center mb-2 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-white text-left\"},product.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(Link,{className:\"btn btn-success\",to:\"/admin/product/update/\".concat(product._id)},/*#__PURE__*/React.createElement(\"span\",{className:\"\"},\"Update\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){deleteThisProduct(product._id);},className:\"btn btn-danger\"},\"Delete\")));}))));};export default ManageProducts;","map":{"version":3,"sources":["/Users/mdsalmanpatel/Desktop/saqlain/Mini_project/projfrontend/src/admin/ManageProducts.js"],"names":["React","useState","useEffect","Base","Link","isAuthenticated","getProducts","deleteProduct","ManageProducts","products","setProducts","user","token","preload","then","data","error","console","log","deleteThisProduct","productId","_id","map","product","index","name"],"mappings":"qLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,eAAT,KAAgC,gBAAhC,CACA,OAASC,WAAT,CAAsBC,aAAtB,KAA2C,uBAA3C,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,eACKP,QAAQ,CAAC,EAAD,CADb,wCACpBQ,QADoB,eACVC,WADU,oCAGHL,eAAe,EAHZ,CAGnBM,IAHmB,kBAGnBA,IAHmB,CAGbC,KAHa,kBAGbA,KAHa,CAK3B,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBP,WAAW,GAAGQ,IAAd,CAAmB,SAAAC,IAAI,CAAI,CACzB,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACdC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB,EACD,CAFD,IAEO,CACLN,WAAW,CAACK,IAAD,CAAX,CACD,CACF,CAND,EAOD,CARD,CAUAb,SAAS,CAAC,UAAM,CACdW,OAAO,GACR,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMM,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAC,SAAS,CAAI,CACrCb,aAAa,CAACa,SAAD,CAAYT,IAAI,CAACU,GAAjB,CAAsBT,KAAtB,CAAb,CAA0CE,IAA1C,CAA+C,SAAAC,IAAI,CAAI,CACrD,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACdC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACC,KAAjB,EACD,CAFD,IAEO,CACLH,OAAO,GACR,CACF,CAND,EAOD,CARD,CAUA,mBACE,oBAAC,IAAD,EAAM,KAAK,CAAC,eAAZ,CAA4B,WAAW,CAAC,sBAAxC,eACE,0BAAI,SAAS,CAAC,MAAd,kBADF,cAEE,oBAAC,IAAD,EAAM,SAAS,CAAC,cAAhB,CAA+B,EAAE,mBAAjC,eACE,4BAAM,SAAS,CAAC,EAAhB,eADF,CAFF,cAKE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,QAAf,EACGJ,QAAQ,CAACa,GAAT,CAAa,SAACC,OAAD,CAAUC,KAAV,CAAoB,CAChC,mBACE,2BAAK,GAAG,CAAEA,KAAV,CAAiB,SAAS,CAAC,uBAA3B,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,0BAAI,SAAS,CAAC,sBAAd,EAAsCD,OAAO,CAACE,IAA9C,CADF,CADF,cAIE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,IAAD,EACE,SAAS,CAAC,iBADZ,CAEE,EAAE,iCAA2BF,OAAO,CAACF,GAAnC,CAFJ,eAIE,4BAAM,SAAS,CAAC,EAAhB,WAJF,CADF,CAJF,cAYE,2BAAK,SAAS,CAAC,OAAf,eACE,8BACE,OAAO,CAAE,kBAAM,CACbF,iBAAiB,CAACI,OAAO,CAACF,GAAT,CAAjB,CACD,CAHH,CAIE,SAAS,CAAC,gBAJZ,WADF,CAZF,CADF,CAyBD,CA1BA,CADH,CADF,CALF,CADF,CAuCD,CApED,CAsEA,cAAeb,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Base from \"../core/Base\";\nimport { Link } from \"react-router-dom\";\nimport { isAuthenticated } from \"../auth/helper\";\nimport { getProducts, deleteProduct } from \"./helper/adminapicall\";\n\nconst ManageProducts = () => {\n  const [products, setProducts] = useState([]);\n\n  const { user, token } = isAuthenticated();\n\n  const preload = () => {\n    getProducts().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setProducts(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    preload();\n  }, []);\n\n  const deleteThisProduct = productId => {\n    deleteProduct(productId, user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        preload();\n      }\n    });\n  };\n\n  return (\n    <Base title=\"Welcome admin\" description=\"Manage products here\">\n      <h2 className=\"mb-4\">All products:</h2>\n      <Link className=\"btn btn-info\" to={`/admin/dashboard`}>\n        <span className=\"\">Admin Home</span>\n      </Link>\n      <div className=\"row\">\n        <div className=\"col-12\">\n          {products.map((product, index) => {\n            return (\n              <div key={index} className=\"row text-center mb-2 \">\n                <div className=\"col-4\">\n                  <h3 className=\"text-white text-left\">{product.name}</h3>\n                </div>\n                <div className=\"col-4\">\n                  <Link\n                    className=\"btn btn-success\"\n                    to={`/admin/product/update/${product._id}`}\n                  >\n                    <span className=\"\">Update</span>\n                  </Link>\n                </div>\n                <div className=\"col-4\">\n                  <button \n                    onClick={() => {\n                      deleteThisProduct(product._id);\n                    }}\n                    className=\"btn btn-danger\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </Base>\n  );\n};\n\nexport default ManageProducts;\n"]},"metadata":{},"sourceType":"module"}